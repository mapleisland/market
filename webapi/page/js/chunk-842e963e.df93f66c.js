(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-842e963e"],{"231d":function(t,e,r){"use strict";var n=r("d4ec"),a=r("262e"),c=r("2caf"),s=r("3c5e"),i=function(t){Object(a["a"])(r,t);var e=Object(c["a"])(r);function r(){return Object(n["a"])(this,r),e.call(this,"/api/product")}return r}(s["a"]);e["a"]=i},6511:function(t,e,r){"use strict";r.r(e);var n,a,c=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"page"},[r("div",{staticClass:"top"},[r("div",{staticClass:"text"},[r("h1",{on:{dblclick:t.fullscreen}},[t._v("新盛和阳果蔬生鲜市场今日菜价")]),r("div",{staticClass:"category"},t._l(t.allCategory,(function(e,n){return r("li",{key:n,class:{active:e==t.allCategory[t.currentCategoryIndex]},on:{click:function(e){return t.clickCategory(n)}}},[t._v(" "+t._s(e.name)+" "),e==t.allCategory[t.currentCategoryIndex]&&t.currentTotalPage>1?[t._v(" "+t._s(t.currentPage)+"/"+t._s(t.currentTotalPage)+" ")]:t._e()],2)})),0)])]),r("div",{staticClass:"wrapper"},[r("div",{staticClass:"table table1"},[t._l(t.currentShowProducts,(function(e,n){return[t.isOdd(n)?t._e():r("div",{key:n,staticClass:"cell",on:{click:function(r){return t.open(e)}}},[r("div",{staticClass:"l"},[r("span",[t._v(t._s(e.name))])]),r("div",{staticClass:"m"}),r("div",{staticClass:"r"},[r("span",[t._v(t._s(e.price||"-")),r("i",[t._v(t._s(e.unit))])])])])]}))],2),r("div",{staticClass:"table table2"},[t._l(t.currentShowProducts,(function(e,n){return[t.isOdd(n)?r("div",{key:n,staticClass:"cell",on:{click:function(r){return t.open(e)}}},[r("div",{staticClass:"l"},[r("span",[t._v(t._s(e.name))])]),r("div",{staticClass:"m"}),r("div",{staticClass:"r"},[r("span",[t._v(t._s(e.price||"-")),r("i",[t._v(t._s(e.unit))])])])]):t._e()]}))],2)])])},s=[],i=(r("99af"),r("a630"),r("a434"),r("b0c0"),r("d3b7"),r("3ca3"),r("ddb0"),r("96cf"),r("1da1")),o=r("6a44"),u=r("231d"),l=5e3,d=1e4,g=new o["a"],p=new u["a"],h={created:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getCategory();case 2:return e.next=4,t.getProducts();case 4:t.startLoop(),t.showNext(0);case 6:case"end":return e.stop()}}),e)})))()},data:function(){return{allCategory:[],allProducts:[],currentCategoryIndex:0,currentShowProducts:[],currentTotalPage:0,currentPage:0}},methods:{getCategory:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,g.getAll();case 2:r=e.sent,t.allCategory=r.rows;case 4:case"end":return e.stop()}}),e)})))()},getProducts:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var r,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.allProducts=[],e.t0=regeneratorRuntime.keys(t.allCategory);case 2:if((e.t1=e.t0()).done){e.next=11;break}return r=e.t1.value,n={category_id:t.allCategory[r].id},e.next=7,p.get(n);case 7:a=e.sent,t.allProducts.push(a.rows),e.next=2;break;case 11:case"end":return e.stop()}}),e)})))()},startLoop:function(){var t=this,e=this.allCategory.length;clearInterval(n),n=setInterval((function(){t.currentPage==t.currentTotalPage&&(t.currentCategoryIndex++,t.currentPage=0,t.currentCategoryIndex>=e&&(t.currentCategoryIndex=0)),t.showNext(t.currentCategoryIndex)}),l)},showProduct:function(){var t=this.cutBy(this.allProducts[this.currentCategoryIndex],20);this.currentTotalPage=t.length},cutBy:function(t,e){t=Array.from(t);var r=[];while(0!==t.length){var n=t.splice(0,e);r.push(n)}return r},isOdd:function(t){return t%2===1},clickCategory:function(t){var e=this;this.showNext(t),clearInterval(n),clearTimeout(a),a=setTimeout((function(){e.startLoop()}),d)},showNext:function(t){var e=this.cutBy(this.allProducts[t],20);this.currentTotalPage=e.length,this.currentCategoryIndex==t?(this.currentPage++,this.currentPage>this.currentTotalPage&&(this.currentPage=1)):(this.currentCategoryIndex=t,this.currentPage=1),this.currentShowProducts=e[this.currentPage-1]},open:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return clearInterval(n),r.prev=1,a='\n        <h1 style="padding-bottom: 10px;">'.concat(t.name,"</h1>\n        <p>价格: ").concat(t.price,"元/斤</p>\n        <p>进货渠道: ").concat(t.purchase_channels,"</p>\n        <p>供应商: ").concat(t.suppliers,"</p>\n        <p>质量检测: ").concat(t.qcpass?"合格":"不合格","</p>\n        <p>新盛新盛和阳果蔬生鲜市场食材选自优质供货渠道,<br>新鲜安全有保障</p>\n        <p>").concat(t.note,'</p>\n        <p style="margin-top:10px;"><img src="./img/logo.png" style="width: 200px;"></p>\n        '),r.next=5,e.$alert(a,{dangerouslyUseHTMLString:!0,center:!0});case 5:e.startLoop(),r.next=11;break;case 8:r.prev=8,r.t0=r["catch"](1),e.startLoop();case 11:case"end":return r.stop()}}),r,null,[[1,8]])})))()},beforeClose:function(){this.startLoop()},fullscreen:function(){var t=document.documentElement;t.requestFullscreen&&t.requestFullscreen()}}},v=h,f=(r("9d01"),r("2877")),y=Object(f["a"])(v,c,s,!1,null,"896bec5a",null);e["default"]=y.exports},"6a44":function(t,e,r){"use strict";var n=r("d4ec"),a=r("262e"),c=r("2caf"),s=r("3c5e"),i=function(t){Object(a["a"])(r,t);var e=Object(c["a"])(r);function r(){return Object(n["a"])(this,r),e.call(this,"/api/category")}return r}(s["a"]);e["a"]=i},"6a4e":function(t,e,r){},"9d01":function(t,e,r){"use strict";var n=r("6a4e"),a=r.n(n);a.a},b0c0:function(t,e,r){var n=r("83ab"),a=r("9bf2").f,c=Function.prototype,s=c.toString,i=/^\s*function ([^ (]*)/,o="name";n&&!(o in c)&&a(c,o,{configurable:!0,get:function(){try{return s.call(this).match(i)[1]}catch(t){return""}}})}}]);
//# sourceMappingURL=chunk-842e963e.df93f66c.js.map