(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-46ee02cc"],{"231d":function(t,e,r){"use strict";var a=r("d4ec"),s=r("262e"),n=r("2caf"),c=r("3c5e"),i=function(t){Object(s["a"])(r,t);var e=Object(n["a"])(r);function r(){return Object(a["a"])(this,r),e.call(this,"/api/product")}return r}(c["a"]);e["a"]=i},"2d3c":function(t,e,r){t.exports=r.p+"media/01.39489f01.mp4"},"4a65":function(t,e,r){"use strict";var a=r("66ef"),s=r.n(a);s.a},"66ef":function(t,e,r){},"6a44":function(t,e,r){"use strict";var a=r("d4ec"),s=r("262e"),n=r("2caf"),c=r("3c5e"),i=function(t){Object(s["a"])(r,t);var e=Object(n["a"])(r);function r(){return Object(a["a"])(this,r),e.call(this,"/api/category")}return r}(c["a"]);e["a"]=i},"83fe":function(t,e,r){"use strict";r.r(e);var a,s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page"},[0==t.step?a("div",{staticClass:"start",on:{click:t.start}},[t._v("开始播放")]):t._e(),a("div",{directives:[{name:"show",rawName:"v-show",value:1===t.step,expression:"step === 1"}],staticClass:"contentContainer",class:{active:1===t.step}},[a("video",{ref:"v1",staticClass:"video",attrs:{src:r("2d3c")}})]),a("div",{directives:[{name:"show",rawName:"v-show",value:2===t.step,expression:"step === 2"}],staticClass:"contentContainer",class:{active:2===t.step}},[a("div",{staticClass:"top"},[a("div",{staticClass:"text"},[a("h1",[t._v("新盛和阳果蔬生鲜市场今日菜价")]),a("div",{staticClass:"category"},t._l(t.allCategory,(function(e,r){return a("li",{key:r,class:{active:e==t.allCategory[t.currentCategoryIndex]}},[t._v(" "+t._s(e.name)+" "),e==t.allCategory[t.currentCategoryIndex]&&t.currentTotalPage>1?[t._v(" "+t._s(t.currentPage)+"/"+t._s(t.currentTotalPage)+" ")]:t._e()],2)})),0)])]),a("div",{staticClass:"wrapper"},[a("div",{staticClass:"table table1"},[t._l(t.currentShowProducts,(function(e,r){return[t.isOdd(r)?t._e():a("div",{key:r,staticClass:"cell"},[a("div",{staticClass:"l"},[a("span",[t._v(t._s(e.name))])]),a("div",{staticClass:"m"}),a("div",{staticClass:"r"},[a("span",[t._v(t._s(e.price||"-")),a("i",[t._v(t._s(e.unit))])])])])]}))],2),a("div",{staticClass:"table table2"},[t._l(t.currentShowProducts,(function(e,r){return[t.isOdd(r)?a("div",{key:r,staticClass:"cell"},[a("div",{staticClass:"l"},[a("span",[t._v(t._s(e.name))])]),a("div",{staticClass:"m"}),a("div",{staticClass:"r"},[a("span",[t._v(t._s(e.price||"-")),a("i",[t._v(t._s(e.unit))])])])]):t._e()]}))],2)])]),a("div",{directives:[{name:"show",rawName:"v-show",value:3===t.step,expression:"step === 3"}],staticClass:"contentContainer",class:{active:3===t.step}},[a("video",{ref:"v2",staticClass:"video",attrs:{src:r("ca14")}})])])},n=[],c=(r("a630"),r("a434"),r("d3b7"),r("3ca3"),r("ddb0"),r("96cf"),r("1da1")),i=r("6a44"),o=r("231d"),u=5e3,l=new i["a"],d=new o["a"],v={created:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getCategory();case 2:return e.next=4,t.getProducts();case 4:case"end":return e.stop()}}),e)})))()},mounted:function(){var t=this;this.$nextTick((function(){t.$refs.v1.addEventListener("ended",(function(){t.step++,t.startLoop(),t.showNext(0)})),t.$refs.v2.addEventListener("ended",(function(){t.step=1,t.$refs.v1.play()}))}))},data:function(){return{step:0,allCategory:[],allProducts:[],currentCategoryIndex:0,currentShowProducts:[],currentTotalPage:0,currentPage:0,loopTime:0,playstart:!1}},methods:{start:function(){this.step=1,this.playstart=!0,this.$refs.v1.play()},getCategory:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,l.getAll();case 2:r=e.sent,t.allCategory=r.rows;case 4:case"end":return e.stop()}}),e)})))()},getProducts:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var r,a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.allProducts=[],e.t0=regeneratorRuntime.keys(t.allCategory);case 2:if((e.t1=e.t0()).done){e.next=11;break}return r=e.t1.value,a={category_id:t.allCategory[r].id},e.next=7,d.get(a);case 7:s=e.sent,t.allProducts.push(s.rows),e.next=2;break;case 11:case"end":return e.stop()}}),e)})))()},startLoop:function(){var t=this,e=this.allCategory.length;clearInterval(a),a=setInterval((function(){t.currentPage==t.currentTotalPage&&(t.currentCategoryIndex++,t.currentPage=0,t.currentCategoryIndex>=e&&(t.currentCategoryIndex=0,t.loopTime++,t.loopTime>=2&&(t.loopTime=0,clearInterval(a),t.step=3,t.$refs.v2.play()))),t.showNext(t.currentCategoryIndex)}),u)},showProduct:function(){var t=this.cutBy(this.allProducts[this.currentCategoryIndex],20);this.currentTotalPage=t.length},cutBy:function(t,e){t=Array.from(t);var r=[];while(0!==t.length){var a=t.splice(0,e);r.push(a)}return r},isOdd:function(t){return t%2===1},showNext:function(t){var e=this.cutBy(this.allProducts[t],20);this.currentTotalPage=e.length,this.currentCategoryIndex==t?(this.currentPage++,this.currentPage>this.currentTotalPage&&(this.currentPage=1)):(this.currentCategoryIndex=t,this.currentPage=1),this.currentShowProducts=e[this.currentPage-1]}},beforeClose:function(){this.startLoop()}},p=v,h=(r("4a65"),r("2877")),f=Object(h["a"])(p,s,n,!1,null,"16410aaa",null);e["default"]=f.exports},ca14:function(t,e,r){t.exports=r.p+"media/02.3ffd372d.mp4"}}]);
//# sourceMappingURL=chunk-46ee02cc.3ce0f30f.js.map